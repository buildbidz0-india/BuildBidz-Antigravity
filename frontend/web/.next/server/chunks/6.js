"use strict";exports.id=6,exports.ids=[6],exports.modules={44006:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(10326),o=a(17577),i=a(86462),s=a(16856),n=a(1572),l=a(94019),c=a(50732),d=a(79635),h=a(77506),p=a(69436),y=a(6824),x=a(77863);let u=[{id:"c1",supplier_name:"L&T",price:148e4,delivery_days:21,reputation_score:9.2},{id:"c2",supplier_name:"Tata Projects",price:152e4,delivery_days:18,reputation_score:8.8},{id:"c3",supplier_name:"NCC",price:142e4,delivery_days:28,reputation_score:7.5}];function f({projectId:e,isOpen:t,onClose:a}){let[f,m]=(0,o.useState)([]),[j,g]=(0,o.useState)(""),[w,b]=(0,o.useState)(!1),N=(0,o.useRef)(null),v=async()=>{if(!j.trim()||w)return;let e={role:"user",content:j};m(t=>[...t,e]),g(""),b(!0);try{let e=await y.no.ragChat(j),t={role:"assistant",content:e.content};m(e=>[...e,t])}catch(e){console.error("AI Chat error:",e),m(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{b(!1)}},T=async(e,t)=>{m(t=>[...t,{role:"user",content:e}]),b(!0);try{let e=await t();m(t=>[...t,{role:"assistant",content:e}])}catch(e){m(t=>[...t,{role:"assistant",content:`Error: ${e instanceof Error?e.message:"Request failed"}.`}])}finally{b(!1)}};return r.jsx(i.M,{children:t&&(0,r.jsxs)(s.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-6 right-6 w-[400px] h-[600px] bg-white rounded-3xl shadow-2xl border border-gray-100 flex flex-col z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-orange-600 text-white flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:r.jsx(n.Z,{size:20})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-lg leading-none",children:"Project Copilot"}),r.jsx("p",{className:"text-white/70 text-xs mt-1",children:"Experimental AI Assistant"})]})]}),r.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:r.jsx(l.Z,{size:20})})]}),(0,r.jsxs)("div",{ref:N,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth",children:[0===f.length&&(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4 px-4",children:[r.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-2xl flex items-center justify-center text-orange-600",children:r.jsx(c.Z,{size:32})}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900",children:"How can I help today?"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ask me anything, or use a quick action below."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx("button",{type:"button",onClick:()=>T("Compare sample bids",async()=>{let e=await y.QU.compare("TMT Steel supply",u),t=e.rankings?.[0];return`**Bid comparison result**

Recommended: **${t?.supplier??e.recommended_bid_id}** (score: ${e.score.toFixed(1)})

**AI Justification:**
${e.justification}`}),disabled:w,className:"w-full py-2.5 px-4 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-xl text-sm font-medium border border-orange-100 disabled:opacity-50",children:"Compare sample bids"}),r.jsx("button",{type:"button",onClick:()=>T("Steel price forecast",async()=>{let e=await y.Ai.analyze({material:"steel",region:"delhi_ncr",quantity:10}),t=e.lock_rate_recommendation?"**LOCK** (recommended)":"**WAIT**";return`**Steel (TMT) forecast – Delhi NCR**

Trend: ${e.trend_direction}
Current: ₹${e.current_price.toLocaleString()}/Ton
30-day forecast: ₹${e.forecast_price_30d.toLocaleString()}

Recommendation: ${t}

**AI Analysis:**
${e.ai_analysis}`}),disabled:w,className:"w-full py-2.5 px-4 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded-xl text-sm font-medium border border-gray-200 disabled:opacity-50",children:"Steel price forecast"})]})]}),f.map((e,t)=>(0,r.jsxs)(s.E.div,{initial:{opacity:0,x:"user"===e.role?10:-10},animate:{opacity:1,x:0},className:(0,x.cn)("flex items-start space-x-3","user"===e.role?"flex-row-reverse space-x-reverse":""),children:[r.jsx("div",{className:(0,x.cn)("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold","user"===e.role?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"),children:"user"===e.role?r.jsx(d.Z,{size:16}):r.jsx(c.Z,{size:16})}),r.jsx("div",{className:(0,x.cn)("p-4 rounded-2xl text-sm leading-relaxed max-w-[80%]","user"===e.role?"bg-blue-600 text-white rounded-tr-none":"bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100"),children:e.content})]},t)),w&&(0,r.jsxs)(s.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:r.jsx(c.Z,{size:16})}),r.jsx("div",{className:"p-4 rounded-2xl bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100",children:r.jsx(h.Z,{size:20,className:"animate-spin text-orange-600"})})]})]}),r.jsx("div",{className:"p-6 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("input",{type:"text",value:j,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&v(),placeholder:"Ask your project assistant...",className:"w-full pl-5 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-2xl focus:border-orange-600 focus:bg-white transition-all outline-none text-sm group-hover:border-gray-300"}),r.jsx("button",{onClick:v,disabled:w||!j.trim(),className:"absolute right-2 top-2 p-2 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(p.Z,{size:18})})]})})]})})}},6824:(e,t,a)=>{a.d(t,{Ai:()=>l,QU:()=>n,aH:()=>h,jb:()=>c,no:()=>i,qx:()=>s,s2:()=>d});let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1";async function o(){return{}}let i={chat:async(e,t,a)=>{let o=await fetch(`${r}/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e,context:t,model:a})});if(!o.ok){let e=await o.json();throw Error(e.detail?.message||e.detail||"Failed to chat")}return o.json()},ragChat:async(e,t,a)=>{let o=await fetch(`${r}/ai/rag-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,context:t,model:a})});if(!o.ok)throw Error((await o.json()).detail||"Failed to chat with AI");return o.json()},ingest:async(e,t={},a="default")=>{let o=await fetch(`${r}/ai/ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,metadata:t,namespace:a})});if(!o.ok)throw Error((await o.json()).detail||"Failed to ingest document");return o.json()}},s={stats:async()=>{let e=await o(),t=await fetch(`${r}/projects/stats`,{headers:{...e}});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to load stats");return t.json()},list:async()=>{let e=await o(),t=await fetch(`${r}/projects`,{headers:{"Content-Type":"application/json",...e}});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to list projects");return(await t.json()).projects??[]},create:async e=>{let t=await o(),a=await fetch(`${r}/projects`,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to create project");return a.json()},getById:async e=>{let t=await o(),a=await fetch(`${r}/projects/${e}`,{headers:{...t}});if(404===a.status)return null;if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to load project");return a.json()},update:async(e,t)=>{let a=await o(),i=await fetch(`${r}/projects/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(t)});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Failed to update project");return i.json()}},n={compare:async(e,t,a)=>{let i=await o(),s=await fetch(`${r}/awards/compare`,{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:e,bids:t,criteria:a??{}})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Award comparison failed");return s.json()},scoreOnly:async(e,t,a)=>{let i=await o(),s=await fetch(`${r}/awards/score-only`,{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:e,bids:t,criteria:a??{}})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Scoring failed");return s.json()}},l={analyze:async e=>{let t=await o(),a=await fetch(`${r}/forecast/analyze`,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Forecast failed");return a.json()}},c={send:async e=>{let t=await o(),a=await fetch(`${r}/coordination/send`,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Coordination failed");return a.json()}},d={extract:async e=>{let t=await o(),a=await fetch(`${r}/extract/`,{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({ocr_text:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Extraction failed");return a.json()}},h={transcribe:async e=>{let t=await o(),a=new FormData;a.append("file",e);let i=await fetch(`${r}/transcribe/`,{method:"POST",headers:{...t},body:a});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Transcription failed");return i.json()}}}};