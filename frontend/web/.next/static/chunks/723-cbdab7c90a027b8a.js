"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{53869:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(57437),n=a(2265),o=a(5095),i=a(60429),s=a(97685),c=a(32489),d=a(69064),l=a(29116);function u(e){let{isOpen:t,onClose:a,onSuccess:u}=e,[f,p]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[y,x]=(0,n.useState)(""),[g,b]=(0,n.useState)(!1),w=async e=>{if(e.preventDefault(),f.trim()){b(!0);try{await l.qx.create({name:f.trim(),location:m.trim()||void 0,description:y.trim()||void 0}),d.Am.success("Project created."),p(""),h(""),x(""),a(),null==u||u()}catch(e){d.Am.error(e instanceof Error?e.message:"Something went wrong.")}finally{b(!1)}}},j=()=>{g||a()};return(0,r.jsx)(o.M,{children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j,className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm"}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-2xl shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center text-orange-600",children:(0,r.jsx)(s.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900",children:"New Project"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Add a new construction project"})]})]}),(0,r.jsx)("button",{type:"button",onClick:j,disabled:g,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:(0,r.jsx)(c.Z,{size:20})})]}),(0,r.jsxs)("form",{onSubmit:w,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"project-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project name *"}),(0,r.jsx)("input",{id:"project-name",type:"text",required:!0,value:f,onChange:e=>p(e.target.value),placeholder:"e.g. Mumbai Metro Extension",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"project-location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,r.jsx)("input",{id:"project-location",type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"e.g. Mumbai, MH",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"project-desc",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{id:"project-desc",rows:3,value:y,onChange:e=>x(e.target.value),placeholder:"Brief description of the project...",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm resize-none"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)("button",{type:"button",onClick:j,disabled:g,className:"flex-1 py-2.5 px-4 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:g||!f.trim(),className:"flex-1 py-2.5 px-4 bg-orange-600 text-white rounded-xl font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creatingâ€¦":"Create Project"})]})]})]})]})})}},35974:function(e,t,a){a.d(t,{C:function(){return s}});var r=a(57437);a(2265);var n=a(90535),o=a(94508);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500 text-white shadow hover:bg-emerald-600",warning:"border-transparent bg-amber-500 text-white shadow hover:bg-amber-600"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)(i({variant:a}),t),...n})}},62869:function(e,t,a){a.d(t,{z:function(){return d}});var r=a(57437),n=a(2265),o=a(37053),i=a(90535),s=a(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-accent text-white hover:bg-accent/90 shadow-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:d=!1,...l}=e,u=d?o.g7:"button";return(0,r.jsx)(u,{className:(0,s.cn)(c({variant:n,size:i,className:a})),ref:t,...l})});d.displayName="Button"},66070:function(e,t,a){a.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},eW:function(){return u},ll:function(){return c}});var r=a(57437),n=a(2265),o=a(94508);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow focus-visible:outline-none",a),...n})});i.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...n})});s.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...n})});l.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},84190:function(e,t,a){a.d(t,{$F:function(){return u},AW:function(){return f},VD:function(){return m},Xi:function(){return p},h_:function(){return l}});var r=a(57437),n=a(2265),o=a(64094),i=a(10407),s=a(30401),c=a(40519),d=a(94508);let l=o.fC,u=o.xz;o.ZA,o.Uv,o.Tr,o.Ee,n.forwardRef((e,t)=>{let{className:a,inset:n,children:s,...c}=e;return(0,r.jsxs)(o.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",a),...c,children:[s,(0,r.jsx)(i.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=o.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(o.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=o.tu.displayName;let f=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...i}=e;return(0,r.jsx)(o.Uv,{children:(0,r.jsx)(o.VY,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});f.displayName=o.VY.displayName;let p=n.forwardRef((e,t)=>{let{className:a,inset:n,...i}=e;return(0,r.jsx)(o.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...i})});p.displayName=o.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:i,...c}=e;return(0,r.jsxs)(o.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...c,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.wU,{children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})}),n]})}).displayName=o.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsxs)(o.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.wU,{children:(0,r.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=o.Rk.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...i}=e;return(0,r.jsx)(o.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...i})}).displayName=o.__.displayName;let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(o.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});m.displayName=o.Z0.displayName},29116:function(e,t,a){a.d(t,{Ai:function(){return d},QU:function(){return c},aH:function(){return f},jb:function(){return l},no:function(){return i},qx:function(){return s},s2:function(){return u}});let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1";async function n(){try{var e;let{auth:t}=await Promise.all([a.e(358),a.e(990),a.e(933),a.e(257)]).then(a.bind(a,54257));if(!t)return{};let r=await (null===(e=t.currentUser)||void 0===e?void 0:e.getIdToken());return r?{Authorization:"Bearer ".concat(r)}:{}}catch(e){return{}}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,n=null;for(let o=0;o<=a;o++)try{let n=await fetch(e,t);if((n.status>=500||429===n.status)&&o<a){let e=r*Math.pow(2,o);await new Promise(t=>setTimeout(t,e));continue}return n}catch(e){if(n=e instanceof Error?e:Error(String(e)),o<a){let e=r*Math.pow(2,o);await new Promise(t=>setTimeout(t,e))}}throw n||Error("Request failed after retries")}let i={chat:async(e,t,a)=>{let n=await o("".concat(r,"/ai/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e,context:t,model:a})});if(!n.ok){var i;let e=await n.json().catch(()=>({}));throw Error((null===(i=e.detail)||void 0===i?void 0:i.message)||e.detail||"Failed to chat (".concat(n.status,")"))}return n.json()},ragChat:async(e,t,a)=>{let n=await o("".concat(r,"/ai/rag-chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,context:t,model:a})});if(!n.ok)throw Error((await n.json().catch(()=>({}))).detail||"Failed to chat with AI (".concat(n.status,")"));return n.json()},ingest:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n=await fetch("".concat(r,"/ai/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,metadata:t,namespace:a})});if(!n.ok)throw Error((await n.json()).detail||"Failed to ingest document");return n.json()}},s={stats:async()=>{let e=await n(),t=await o("".concat(r,"/projects/stats"),{headers:{...e}});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to load stats (".concat(t.status,")"));return t.json()},list:async()=>{var e;let t=await n(),a=await o("".concat(r,"/projects"),{headers:{"Content-Type":"application/json",...t}});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to list projects (".concat(a.status,")"));return null!==(e=(await a.json()).projects)&&void 0!==e?e:[]},create:async e=>{let t=await n(),a=await fetch("".concat(r,"/projects"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to create project");return a.json()},getById:async e=>{let t=await n(),a=await fetch("".concat(r,"/projects/").concat(e),{headers:{...t}});if(404===a.status)return null;if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to load project");return a.json()},update:async(e,t)=>{let a=await n(),o=await fetch("".concat(r,"/projects/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(t)});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"Failed to update project");return o.json()}},c={compare:async(e,t,a)=>{let i=await n(),s=await o("".concat(r,"/awards/compare"),{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:e,bids:t,criteria:null!=a?a:{}})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Award comparison failed (".concat(s.status,")"));return s.json()},scoreOnly:async(e,t,a)=>{let o=await n(),i=await fetch("".concat(r,"/awards/score-only"),{method:"POST",headers:{"Content-Type":"application/json",...o},body:JSON.stringify({requirement_description:e,bids:t,criteria:null!=a?a:{}})});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Scoring failed");return i.json()}},d={analyze:async e=>{let t=await n(),a=await o("".concat(r,"/forecast/analyze"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Forecast failed (".concat(a.status,")"));return a.json()}},l={send:async e=>{let t=await n(),a=await fetch("".concat(r,"/coordination/send"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Coordination failed");return a.json()}},u={extract:async e=>{let t=await n(),a=await fetch("".concat(r,"/extract/"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({ocr_text:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Extraction failed");return a.json()}},f={transcribe:async e=>{let t=await n(),a=new FormData;a.append("file",e);let o=await fetch("".concat(r,"/transcribe/"),{method:"POST",headers:{...t},body:a});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"Transcription failed");return o.json()}}},94508:function(e,t,a){a.d(t,{cn:function(){return o}});var r=a(61994),n=a(53335);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}}}]);