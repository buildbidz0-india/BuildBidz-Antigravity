(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2410:function(e,t,s){Promise.resolve().then(s.bind(s,15118))},15118:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var a=s(57437),r=s(2265),l=s(60429),i=s(99397),n=s(82023),o=s(64972),c=s(47625),d=s(77031),x=s(56940),m=s(97059),u=s(62994),p=s(8147),h=s(22190),b=s(83046);let g=[{name:"Larsen & Toubro",price:98,score:92,delivery:95},{name:"Tata Projects",price:95,score:88,delivery:90},{name:"NCC Ltd",price:85,score:78,delivery:75},{name:"Shapoorji",price:92,score:85,delivery:88}];function f(e){var t,s;let{decision:r,loading:l}=e,i=(null!==(s=null==r?void 0:null===(t=r.rankings)||void 0===t?void 0:t.map(e=>{var t,s,a,r,l;return{name:null!==(s=e.supplier)&&void 0!==s?s:"",score:Number(null!==(r=null!==(a=e.total_score)&&void 0!==a?a:e.score)&&void 0!==r?r:0),price:null!==(l=null===(t=e.breakdown)||void 0===t?void 0:t.price)&&void 0!==l?l:void 0}}))&&void 0!==s?s:g).map(e=>{var t;return{...e,price:null!==(t=e.price)&&void 0!==t?t:e.score}});return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm h-full flex flex-col p-6",children:[(0,a.jsxs)("div",{className:"mb-6 space-y-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Bid Analysis"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"AI-driven evaluation based on Price, Delivery & Reputation"})]}),(0,a.jsx)("div",{className:"flex-1 min-h-[300px] w-full",children:l?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(d.v,{data:i,margin:{top:10,right:10,left:-20,bottom:0},barGap:2,children:[(0,a.jsx)(x.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,a.jsx)(m.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},dy:10}),(0,a.jsx)(u.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11}}),(0,a.jsx)(p.u,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,a.jsx)(h.D,{wrapperStyle:{paddingTop:"20px"}}),(0,a.jsx)(b.$,{dataKey:"score",name:"AI Score",fill:"#0f172a",radius:[4,4,0,0],barSize:24}),(0,a.jsx)(b.$,{dataKey:"price",name:"Price Competitiveness",fill:"#cbd5e1",radius:[4,4,0,0],barSize:24})]})})}),(null==r?void 0:r.justification)&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-orange-50/50 border border-orange-100 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-orange-500"}),(0,a.jsx)("p",{className:"text-xs font-bold text-orange-700 uppercase tracking-wider",children:"AI Insight"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-medium",children:r.justification})]})]})}var j=s(5481),y=s(23263),v=s(54061),N=s(29116);let w=[{value:"steel",label:"Steel (TMT)"},{value:"cement",label:"Cement"},{value:"sand",label:"Sand"},{value:"tiles",label:"Tiles"},{value:"fittings",label:"Fittings"}],k=[{value:"delhi_ncr",label:"Delhi NCR"},{value:"patna",label:"Patna"},{value:"lucknow",label:"Lucknow"},{value:"indore",label:"Indore"}];function _(){var e,t;let[s,l]=(0,r.useState)("steel"),[i,n]=(0,r.useState)("delhi_ncr"),[o,d]=(0,r.useState)(null),[b,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{g(!0),N.Ai.analyze({material:s,region:i,quantity:10}).then(d).catch(()=>d(null)).finally(()=>g(!1))},[s,i]);let f=null!==(t=null==o?void 0:null===(e=o.historical_data)||void 0===e?void 0:e.map(e=>({month:new Date(e.date).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),actual:e.price,forecast:null})))&&void 0!==t?t:[],_=f.length&&o?[...f,{month:"30d f/c",actual:null,forecast:o.forecast_price_30d}]:f;if(b)return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-full",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Price Forecast"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Trend analysis & AI lock recommendation"})]})}),(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600"})})]});let C=(null==o?void 0:o.lock_rate_recommendation)?(0,a.jsx)("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-md border border-amber-200",children:"LOCK NOW"}):(0,a.jsx)("span",{className:"bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded-md border border-emerald-200",children:"WAIT"});return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm h-full flex flex-col p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Price Forecast"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Market Trend Analysis"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("select",{value:s,onChange:e=>l(e.target.value),className:"text-sm h-9 border border-input rounded-md px-3 bg-background hover:bg-accent/5 focus:ring-2 focus:ring-ring focus:border-input transition-colors cursor-pointer",children:w.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("select",{value:i,onChange:e=>n(e.target.value),className:"text-sm h-9 border border-input rounded-md px-3 bg-background hover:bg-accent/5 focus:ring-2 focus:ring-ring focus:border-input transition-colors cursor-pointer",children:k.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),o&&C]})]}),(0,a.jsx)("div",{className:"flex-1 min-h-[300px] w-full",children:b?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(j.T,{data:_,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorForecast",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.15}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:0})]})}),(0,a.jsx)(x.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,a.jsx)(m.K,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},dy:10}),(0,a.jsx)(u.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},domain:["dataMin - 500","dataMax + 500"]}),(0,a.jsx)(p.u,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,a.jsx)(h.D,{wrapperStyle:{paddingTop:"20px"}}),(0,a.jsx)(y.u,{type:"monotone",dataKey:"actual",name:"Current Price",stroke:"#0f172a",strokeWidth:2,fill:"transparent"}),(null==o?void 0:o.forecast_price_30d)!=null&&(0,a.jsx)(v.x,{type:"monotone",dataKey:"forecast",name:"AI Forecast",stroke:"#f97316",strokeWidth:2,strokeDasharray:"4 4",dot:{r:4,fill:"#f97316",strokeWidth:0},connectNulls:!0})]})})}),(null==o?void 0:o.ai_analysis)&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-100 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:"AI Analysis"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed font-medium",children:o.ai_analysis})]})]})}var C=s(27648),S=s(97685),z=s(5005),A=s(91723),Z=s(49322),T=s(17580),L=s(69430),E=s(10407),I=s(31047),P=s(67782),D=s(66070),O=s(62869),F=s(35974),K=s(84190),M=s(94508);let R=[{label:"Active Projects",key:"active",icon:S.Z,trend:"+12.5%",trendUp:!0,desc:"vs. last month"},{label:"Total Projects",key:"total",icon:z.Z,trend:"+4.2%",trendUp:!0,desc:"vs. last month"},{label:"In Planning",key:"planning",icon:A.Z,trend:"-2.1%",trendUp:!1,desc:"vs. last month"},{label:"Critical Alerts",value:"2",icon:Z.Z,trend:"+1",trendUp:!1,desc:"new since yesterday",alert:!0}];function U(e){let{stats:t,loading:s}=e,r=e=>{var s;return"value"in e?e.value:t&&e.key?String(null!==(s=t[e.key])&&void 0!==s?s:"0"):"—"};return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:R.map((e,t)=>(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,a.jsx)(D.Zb,{className:"hover:shadow-md transition-shadow",children:(0,a.jsxs)(D.aY,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:(0,M.cn)("p-2 rounded-full",e.alert?"bg-red-100 text-red-600":"bg-primary/10 text-primary"),children:(0,a.jsx)(e.icon,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e.label}),(0,a.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:s?(0,a.jsx)("span",{className:"animate-pulse bg-gray-200 h-8 w-12 block rounded"}):r(e)})]})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:(0,M.cn)("flex items-center font-medium mr-2",e.trendUp?"text-green-600":"text-red-600"),children:[e.trendUp?(0,a.jsx)(T.Z,{size:14,className:"mr-1"}):(0,a.jsx)(L.Z,{size:14,className:"mr-1"}),e.trend]}),e.desc]})]})})},e.label))})}function W(e){let{projects:t,loading:s}=e;return(0,a.jsxs)(D.Zb,{className:"h-full",children:[(0,a.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(D.ll,{children:"Recent Projects"}),(0,a.jsx)(D.SZ,{children:"Latest updates from your project portfolio"})]}),(0,a.jsx)(O.z,{variant:"ghost",size:"sm",className:"hidden sm:flex",asChild:!0,children:(0,a.jsxs)(C.default,{href:"/dashboard/projects",children:["View all ",(0,a.jsx)(E.Z,{className:"ml-2 h-4 w-4"})]})})]}),(0,a.jsx)(D.aY,{className:"p-0",children:(0,a.jsx)("div",{className:"space-y-0",children:s?[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b last:border-0 border-border/50",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-48 bg-muted animate-pulse rounded"}),(0,a.jsx)("div",{className:"h-3 w-24 bg-muted animate-pulse rounded"})]}),(0,a.jsx)("div",{className:"h-8 w-20 bg-muted animate-pulse rounded"})]},t)):0===t.length?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"No recent activity found."}):t.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b last:border-0 border-border/50 hover:bg-muted/30 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm shrink-0",children:e.name.substring(0,2).toUpperCase()}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(I.Z,{className:"mr-1 h-3 w-3"}),"Created ",new Date(null!==(t=e.created_at)&&void 0!==t?t:"").toLocaleDateString("en-IN",{month:"short",day:"numeric"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(F.C,{variant:function(e){switch(e.toLowerCase()){case"active":return"success";case"planning":return"warning";case"completed":return"default";default:return"secondary"}}(e.status),children:e.status}),(0,a.jsxs)(K.h_,{children:[(0,a.jsx)(K.$F,{asChild:!0,children:(0,a.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(P.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(K.AW,{align:"end",children:[(0,a.jsx)(K.Xi,{asChild:!0,children:(0,a.jsx)(C.default,{href:"/dashboard/projects/".concat(e.id),children:"View Details"})}),(0,a.jsx)(K.Xi,{children:"View Bids"})]})]})]})]},e.id)})})})]})}var q=s(38793),B=s(53869),H=s(5095),G=s(32489),Y=s(44743),V=s(30401),$=s(78867),Q=s(69064);function X(e){var t,s,i,n,o;let{isOpen:c,onClose:d,defaultProjectName:x=""}=e,[m,u]=(0,r.useState)({contractor_name:"",phone_number:"",language:"hinglish",step:"award_notification",project_name:x,details:{message:"Aapka bid accept ho gaya hai. Site par milte hain."}}),[p,h]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),y=async e=>{var t,s,a;if(e.preventDefault(),!(null===(t=m.contractor_name)||void 0===t?void 0:t.trim())||!(null===(s=m.phone_number)||void 0===s?void 0:s.trim())||!(null===(a=m.project_name)||void 0===a?void 0:a.trim())){Q.Am.error("Fill contractor name, phone, and project name.");return}g(!0),h(null);try{let e=await N.jb.send(m);h(e),Q.Am.success("Message generated.")}catch(e){Q.Am.error(e instanceof Error?e.message:"Failed to generate notification.")}finally{g(!1)}};return(0,a.jsx)(H.M,{children:c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"fixed inset-0 bg-black/50 z-40"}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white rounded-2xl shadow-xl z-50 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Send notification"}),(0,a.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(G.Z,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:y,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor name"}),(0,a.jsx)("input",{type:"text",value:null!==(t=m.contractor_name)&&void 0!==t?t:"",onChange:e=>u(t=>({...t,contractor_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone number"}),(0,a.jsx)("input",{type:"text",value:null!==(s=m.phone_number)&&void 0!==s?s:"",onChange:e=>u(t=>({...t,phone_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",placeholder:"+91..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project name"}),(0,a.jsx)("input",{type:"text",value:null!==(i=m.project_name)&&void 0!==i?i:"",onChange:e=>u(t=>({...t,project_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,a.jsxs)("select",{value:null!==(n=m.language)&&void 0!==n?n:"hinglish",onChange:e=>u(t=>({...t,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",children:[(0,a.jsx)("option",{value:"english",children:"English"}),(0,a.jsx)("option",{value:"hindi",children:"Hindi"}),(0,a.jsx)("option",{value:"hinglish",children:"Hinglish"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notification type"}),(0,a.jsxs)("select",{value:null!==(o=m.step)&&void 0!==o?o:"award_notification",onChange:e=>u(t=>({...t,step:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",children:[(0,a.jsx)("option",{value:"award_notification",children:"Award notification"}),(0,a.jsx)("option",{value:"site_ready",children:"Site ready"}),(0,a.jsx)("option",{value:"payment_released",children:"Payment released"}),(0,a.jsx)("option",{value:"defect_notice",children:"Defect notice"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:b,className:"w-full flex items-center justify-center gap-2 py-3 bg-orange-600 text-white rounded-xl font-semibold hover:bg-orange-700 disabled:opacity-50",children:b?"Generating...":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.Z,{size:18})," Generate message"]})})]}),p&&(0,a.jsxs)("div",{className:"p-6 border-t border-gray-100 bg-gray-50",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"WhatsApp message"}),(0,a.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-xl text-sm text-gray-800 whitespace-pre-wrap",children:p.whatsapp_formatted}),(0,a.jsxs)("button",{type:"button",onClick:()=>{(null==p?void 0:p.whatsapp_formatted)&&(navigator.clipboard.writeText(p.whatsapp_formatted),j(!0),Q.Am.success("Copied to clipboard."),setTimeout(()=>j(!1),2e3))},className:"mt-3 flex items-center gap-2 text-orange-600 hover:text-orange-700 text-sm font-medium",children:[f?(0,a.jsx)(V.Z,{size:16}):(0,a.jsx)($.Z,{size:16}),f?"Copied":"Copy to clipboard"]})]})]})]})})}let J=[{id:"b1",supplier_name:"Larsen & Toubro",price:148e4,delivery_days:21,reputation_score:9.2},{id:"b2",supplier_name:"Tata Projects",price:152e4,delivery_days:18,reputation_score:8.8},{id:"b3",supplier_name:"NCC Ltd",price:142e4,delivery_days:28,reputation_score:7.5},{id:"b4",supplier_name:"Shapoorji",price:155e4,delivery_days:20,reputation_score:8.5}];function ee(){let[e,t]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(!0),[b,g]=(0,r.useState)(!0),[j,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)(!1),S=()=>{h(!0),g(!0),N.qx.stats().then(x).catch(()=>x(null)).finally(()=>h(!1)),N.qx.list().then(e=>u(e.slice(0,5))).catch(()=>u([])).finally(()=>g(!1))};return(0,r.useEffect)(()=>{S()},[s]),(0,r.useEffect)(()=>{w(!0),N.QU.compare("TMT Steel supply for Phase 1",J).then(y).catch(()=>y(null)).finally(()=>w(!1))},[]),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold font-heading text-foreground tracking-tight",children:"Dashboard Overview"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Welcome back. Here's your construction portfolio status today."})]}),(0,a.jsxs)(O.z,{onClick:()=>c(!0),size:"lg",className:"shadow-lg shadow-primary/20",children:[(0,a.jsx)(i.Z,{className:"mr-2 h-5 w-5"}),"New Project"]})]}),(0,a.jsx)(U,{stats:d,loading:p}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"h-[500px]",children:(0,a.jsx)(f,{decision:j,loading:v})}),(0,a.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"h-[500px]",children:(0,a.jsx)(_,{})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(W,{projects:m,loading:b})}),(0,a.jsxs)(D.Zb,{className:"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground border-none shadow-xl overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),(0,a.jsxs)(D.Ol,{className:"relative z-10 pb-2",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-white/10 rounded-xl flex items-center justify-center mb-4 backdrop-blur-sm",children:(0,a.jsx)(n.Z,{className:"h-6 w-6 text-accent"})}),(0,a.jsx)(D.ll,{className:"text-xl",children:"AI Copilot"}),(0,a.jsx)(D.SZ,{className:"text-primary-foreground/70",children:"Your intelligent assistant for construction management."})]}),(0,a.jsxs)(D.aY,{className:"relative z-10 space-y-4 mt-4",children:[(0,a.jsxs)(O.z,{variant:"secondary",className:"w-full justify-start h-auto py-3 px-4 bg-white/10 hover:bg-white/20 text-white border-0",onClick:()=>t(!0),children:[(0,a.jsx)(o.Z,{className:"mr-3 h-5 w-5 text-accent"}),(0,a.jsxs)("div",{className:"flex flex-col items-start text-left",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Ask Copilot"}),(0,a.jsx)("span",{className:"text-xs opacity-70 font-normal",children:"Analyze bids or get recommendations"})]})]}),(0,a.jsxs)(O.z,{variant:"secondary",className:"w-full justify-start h-auto py-3 px-4 bg-white/10 hover:bg-white/20 text-white border-0",onClick:()=>C(!0),children:[(0,a.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-accent mr-3"}),(0,a.jsxs)("div",{className:"flex flex-col items-start text-left",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Send Notifications"}),(0,a.jsx)("span",{className:"text-xs opacity-70 font-normal",children:"Draft emails to contractors"})]})]})]})]})]}),(0,a.jsx)(q.Z,{projectId:"dashboard",isOpen:e,onClose:()=>t(!1)}),(0,a.jsx)(B.Z,{isOpen:s,onClose:()=>c(!1)}),(0,a.jsx)(X,{isOpen:k,onClose:()=>C(!1)})]})}},38793:function(e,t,s){"use strict";s.d(t,{Z:function(){return b}});var a=s(57437),r=s(2265),l=s(5095),i=s(60429),n=s(82023),o=s(32489),c=s(82222),d=s(92369),x=s(51817),m=s(44743),u=s(29116),p=s(94508);let h=[{id:"c1",supplier_name:"L&T",price:148e4,delivery_days:21,reputation_score:9.2},{id:"c2",supplier_name:"Tata Projects",price:152e4,delivery_days:18,reputation_score:8.8},{id:"c3",supplier_name:"NCC",price:142e4,delivery_days:28,reputation_score:7.5}];function b(e){let{projectId:t,isOpen:s,onClose:b}=e,[g,f]=(0,r.useState)([]),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(!1),w=(0,r.useRef)(null);(0,r.useEffect)(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[g,v]);let k=async()=>{if(!j.trim()||v)return;let e={role:"user",content:j};f(t=>[...t,e]),y(""),N(!0);try{let e=await u.no.ragChat(j),t={role:"assistant",content:e.content};f(e=>[...e,t])}catch(e){console.error("AI Chat error:",e),f(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{N(!1)}},_=async(e,t)=>{f(t=>[...t,{role:"user",content:e}]),N(!0);try{let e=await t();f(t=>[...t,{role:"assistant",content:e}])}catch(e){f(t=>[...t,{role:"assistant",content:"Error: ".concat(e instanceof Error?e.message:"Request failed",".")}])}finally{N(!1)}};return(0,a.jsx)(l.M,{children:s&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-6 right-6 w-[400px] h-[600px] bg-white rounded-3xl shadow-2xl border border-gray-100 flex flex-col z-50 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-orange-600 text-white flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,a.jsx)(n.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg leading-none",children:"Project Copilot"}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Experimental AI Assistant"})]})]}),(0,a.jsx)("button",{onClick:b,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,a.jsx)(o.Z,{size:20})})]}),(0,a.jsxs)("div",{ref:w,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth",children:[0===g.length&&(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4 px-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-50 rounded-2xl flex items-center justify-center text-orange-600",children:(0,a.jsx)(c.Z,{size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900",children:"How can I help today?"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Ask me anything, or use a quick action below."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsx)("button",{type:"button",onClick:()=>_("Compare sample bids",async()=>{var e,t;let s=await u.QU.compare("TMT Steel supply",h),a=null===(e=s.rankings)||void 0===e?void 0:e[0];return"**Bid comparison result**\n\nRecommended: **".concat(null!==(t=null==a?void 0:a.supplier)&&void 0!==t?t:s.recommended_bid_id,"** (score: ").concat(s.score.toFixed(1),")\n\n**AI Justification:**\n").concat(s.justification)}),disabled:v,className:"w-full py-2.5 px-4 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-xl text-sm font-medium border border-orange-100 disabled:opacity-50",children:"Compare sample bids"}),(0,a.jsx)("button",{type:"button",onClick:()=>_("Steel price forecast",async()=>{let e=await u.Ai.analyze({material:"steel",region:"delhi_ncr",quantity:10}),t=e.lock_rate_recommendation?"**LOCK** (recommended)":"**WAIT**";return"**Steel (TMT) forecast – Delhi NCR**\n\nTrend: ".concat(e.trend_direction,"\nCurrent: ₹").concat(e.current_price.toLocaleString(),"/Ton\n30-day forecast: ₹").concat(e.forecast_price_30d.toLocaleString(),"\n\nRecommendation: ").concat(t,"\n\n**AI Analysis:**\n").concat(e.ai_analysis)}),disabled:v,className:"w-full py-2.5 px-4 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded-xl text-sm font-medium border border-gray-200 disabled:opacity-50",children:"Steel price forecast"})]})]}),g.map((e,t)=>(0,a.jsxs)(i.E.div,{initial:{opacity:0,x:"user"===e.role?10:-10},animate:{opacity:1,x:0},className:(0,p.cn)("flex items-start space-x-3","user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,a.jsx)("div",{className:(0,p.cn)("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold","user"===e.role?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"),children:"user"===e.role?(0,a.jsx)(d.Z,{size:16}):(0,a.jsx)(c.Z,{size:16})}),(0,a.jsx)("div",{className:(0,p.cn)("p-4 rounded-2xl text-sm leading-relaxed max-w-[80%]","user"===e.role?"bg-blue-600 text-white rounded-tr-none":"bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100"),children:e.content})]},t)),v&&(0,a.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:(0,a.jsx)(c.Z,{size:16})}),(0,a.jsx)("div",{className:"p-4 rounded-2xl bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100",children:(0,a.jsx)(x.Z,{size:20,className:"animate-spin text-orange-600"})})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&k(),placeholder:"Ask your project assistant...",className:"w-full pl-5 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-2xl focus:border-orange-600 focus:bg-white transition-all outline-none text-sm group-hover:border-gray-300"}),(0,a.jsx)("button",{onClick:k,disabled:v||!j.trim(),className:"absolute right-2 top-2 p-2 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(m.Z,{size:18})})]})})]})})}}},function(e){e.O(0,[429,972,659,302,530,425,913,723,971,117,744],function(){return e(e.s=2410)}),_N_E=e.O()}]);