(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{7361:function(e,t,a){Promise.resolve().then(a.bind(a,43798))},43798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(57437),n=a(2265),i=a(60429),s=a(51817),o=a(48736),c=a(17689),l=a(92934),d=a(49322),h=a(29116),u=a(69064);function m(){let[e,t]=(0,n.useState)(""),[a,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(!1),f=async()=>{if(!e.trim()){u.Am.error("Paste OCR text first.");return}x(!0),m(null);try{let t=await h.s2.extract(e);m(t),u.Am.success("Extraction complete.")}catch(e){u.Am.error(e instanceof Error?e.message:"Extraction failed.")}finally{x(!1)}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Magic Extractor"}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:"Paste invoice or receipt OCR text to get structured data (GSTIN, PAN, line items)."})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OCR text"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-200 rounded-xl text-sm font-mono focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Paste invoice or receipt text here..."}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,r.jsxs)("button",{type:"button",onClick:f,disabled:p,className:"flex items-center gap-2 bg-orange-600 text-white px-5 py-2.5 rounded-xl font-semibold hover:bg-orange-700 disabled:opacity-50",children:[p?(0,r.jsx)(s.Z,{size:18,className:"animate-spin"}):(0,r.jsx)(o.Z,{size:18}),"Extract"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 px-5 py-2.5 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:[(0,r.jsx)(c.Z,{size:18}),"Upload text file",(0,r.jsx)("input",{type:"file",accept:".txt,.csv,.json,text/*",className:"hidden",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;let n=new FileReader;n.onload=()=>{t("string"==typeof n.result?n.result:""),m(null),u.Am.success("File loaded. Click Extract to run.")},n.readAsText(r,"UTF-8"),e.target.value=""}})]}),(0,r.jsx)("button",{type:"button",onClick:()=>t("Invoice No: INV-2024-001\nVendor: ABC Steel Traders\nDate: 2024-02-01\nGSTIN: 27AABCU9603R1ZM\nPAN: AABCU9603R\n\nItem          Qty   Unit   Rate     Amount\nTMT Bar 12mm  50    Ton    54000    2700000\nCement PPC    200   Bag    380      76000\nTotal Amount: Rs 27,76,000"),className:"px-5 py-2.5 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50",children:"Load sample"})]})]}),a&&(0,r.jsxs)("div",{className:"p-6 bg-gray-50 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.verification_ready?(0,r.jsx)(l.Z,{className:"text-green-600",size:20}):(0,r.jsx)(d.Z,{className:"text-amber-600",size:20}),(0,r.jsxs)("span",{className:"font-semibold text-gray-900",children:[a.document_type,a.verification_ready?" \xb7 Verification ready":" \xb7 Missing GSTIN or total"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.vendor_name&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Vendor"}),(0,r.jsx)("p",{className:"font-medium",children:a.vendor_name})]}),a.gstin&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"GSTIN"}),(0,r.jsx)("p",{className:"font-medium font-mono",children:a.gstin})]}),a.pan&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PAN"}),(0,r.jsx)("p",{className:"font-medium font-mono",children:a.pan})]}),null!=a.total_amount&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Total"}),(0,r.jsxs)("p",{className:"font-medium",children:["₹",a.total_amount.toLocaleString()]})]}),a.invoice_number&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Invoice #"}),(0,r.jsx)("p",{className:"font-medium",children:a.invoice_number})]}),a.invoice_date&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Date"}),(0,r.jsx)("p",{className:"font-medium",children:a.invoice_date})]})]}),a.line_items&&a.line_items.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Line items"}),(0,r.jsxs)("table",{className:"w-full text-sm border border-gray-200 rounded-xl overflow-hidden bg-white",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,r.jsx)("th",{className:"p-3",children:"Description"}),(0,r.jsx)("th",{className:"p-3",children:"Qty"}),(0,r.jsx)("th",{className:"p-3",children:"Unit"}),(0,r.jsx)("th",{className:"p-3",children:"Rate"}),(0,r.jsx)("th",{className:"p-3",children:"Amount"})]})}),(0,r.jsx)("tbody",{children:a.line_items.map((e,t)=>{var a,n;return(0,r.jsxs)("tr",{className:"border-t border-gray-100",children:[(0,r.jsx)("td",{className:"p-3",children:e.description}),(0,r.jsx)("td",{className:"p-3",children:null!==(a=e.quantity)&&void 0!==a?a:"—"}),(0,r.jsx)("td",{className:"p-3",children:null!==(n=e.unit)&&void 0!==n?n:"—"}),(0,r.jsx)("td",{className:"p-3",children:null!=e.unit_price?"₹".concat(e.unit_price):"—"}),(0,r.jsx)("td",{className:"p-3",children:null!=e.total_price?"₹".concat(e.total_price.toLocaleString()):"—"})]},t)})})]})]})]})]})]})}},29116:function(e,t,a){"use strict";a.d(t,{Ai:function(){return c},QU:function(){return o},aH:function(){return h},jb:function(){return l},no:function(){return i},qx:function(){return s},s2:function(){return d}});let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1";async function n(){try{var e;let{auth:t}=await Promise.all([a.e(358),a.e(990),a.e(933),a.e(257)]).then(a.bind(a,54257));if(!t)return{};let r=await (null===(e=t.currentUser)||void 0===e?void 0:e.getIdToken());return r?{Authorization:"Bearer ".concat(r)}:{}}catch(e){return{}}}let i={chat:async(e,t,a)=>{let n=await fetch("".concat(r,"/ai/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e,context:t,model:a})});if(!n.ok){var i;let e=await n.json();throw Error((null===(i=e.detail)||void 0===i?void 0:i.message)||e.detail||"Failed to chat")}return n.json()},ragChat:async(e,t,a)=>{let n=await fetch("".concat(r,"/ai/rag-chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,context:t,model:a})});if(!n.ok)throw Error((await n.json()).detail||"Failed to chat with AI");return n.json()},ingest:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n=await fetch("".concat(r,"/ai/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,metadata:t,namespace:a})});if(!n.ok)throw Error((await n.json()).detail||"Failed to ingest document");return n.json()}},s={stats:async()=>{let e=await n(),t=await fetch("".concat(r,"/projects/stats"),{headers:{...e}});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to load stats");return t.json()},list:async()=>{var e;let t=await n(),a=await fetch("".concat(r,"/projects"),{headers:{"Content-Type":"application/json",...t}});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to list projects");return null!==(e=(await a.json()).projects)&&void 0!==e?e:[]},create:async e=>{let t=await n(),a=await fetch("".concat(r,"/projects"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to create project");return a.json()},getById:async e=>{let t=await n(),a=await fetch("".concat(r,"/projects/").concat(e),{headers:{...t}});if(404===a.status)return null;if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to load project");return a.json()},update:async(e,t)=>{let a=await n(),i=await fetch("".concat(r,"/projects/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(t)});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Failed to update project");return i.json()}},o={compare:async(e,t,a)=>{let i=await n(),s=await fetch("".concat(r,"/awards/compare"),{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:e,bids:t,criteria:null!=a?a:{}})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Award comparison failed");return s.json()},scoreOnly:async(e,t,a)=>{let i=await n(),s=await fetch("".concat(r,"/awards/score-only"),{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:e,bids:t,criteria:null!=a?a:{}})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Scoring failed");return s.json()}},c={analyze:async e=>{let t=await n(),a=await fetch("".concat(r,"/forecast/analyze"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Forecast failed");return a.json()}},l={send:async e=>{let t=await n(),a=await fetch("".concat(r,"/coordination/send"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Coordination failed");return a.json()}},d={extract:async e=>{let t=await n(),a=await fetch("".concat(r,"/extract/"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({ocr_text:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Extraction failed");return a.json()}},h={transcribe:async e=>{let t=await n(),a=new FormData;a.append("file",e);let i=await fetch("".concat(r,"/transcribe/"),{method:"POST",headers:{...t},body:a});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Transcription failed");return i.json()}}},79205:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var r=a(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),s=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:d="",children:h,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:a,strokeWidth:s?24*Number(i)/Number(n):i,className:o("lucide",d),...!h&&!c(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:c,...l}=a;return(0,r.createElement)(d,{ref:i,iconNode:t,className:o("lucide-".concat(n(s(e))),"lucide-".concat(e),c),...l})});return a.displayName=s(e),a}},49322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92934:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},51817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},17689:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},function(e){e.O(0,[429,659,971,117,744],function(){return e(e.s=7361)}),_N_E=e.O()}]);