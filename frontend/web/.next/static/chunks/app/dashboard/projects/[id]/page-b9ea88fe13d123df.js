(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{11144:function(e,t,a){Promise.resolve().then(a.bind(a,62690))},62690:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var r=a(57437),s=a(60429),n=a(79205);let o=(0,n.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),i=(0,n.Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var l=a(98728),c=a(99397);let d=(0,n.Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),m=(0,n.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var u=a(91723),x=a(95805),h=a(27648),p=a(99376),g=a(2265),y=a(82023),f=a(38793);let b=(0,n.Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),j=(0,n.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var v=a(49322),w=a(51817);let N=(0,n.Z)("file-up",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var k=a(29116);function C(){let[e,t]=(0,g.useState)(""),[a,n]=(0,g.useState)(!1),[o,i]=(0,g.useState)("idle"),l=async()=>{if(e.trim()&&!a){n(!0),i("idle");try{await k.n.ingest(e),i("success"),t(""),setTimeout(()=>i("idle"),3e3)}catch(e){console.error("Ingestion failed:",e),i("error")}finally{n(!1)}}};return(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gray-50 flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center text-orange-600",children:(0,r.jsx)(b,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900",children:"Knowledge Ingestion"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs",children:"Feed data to your Project Copilot"})]})]})}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Pasted Text / Snippet"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Paste technical requirements, safety rules, or site notes here...",className:"w-full h-40 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:border-orange-600 focus:bg-white transition-all outline-none text-sm resize-none"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"p-1 px-2.5 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center",children:[(0,r.jsx)(y.Z,{size:10,className:"mr-1"}),"Auto-Indexed"]}),"success"===o&&(0,r.jsxs)(s.E.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-green-600 text-xs font-bold flex items-center",children:[(0,r.jsx)(j,{size:14,className:"mr-1"}),"Successfully indexed!"]}),"error"===o&&(0,r.jsxs)(s.E.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-red-600 text-xs font-bold flex items-center",children:[(0,r.jsx)(v.Z,{size:14,className:"mr-1"}),"Failed to index."]})]}),(0,r.jsxs)("button",{onClick:l,disabled:a||!e.trim(),className:"flex items-center px-6 py-2.5 bg-gray-900 text-white rounded-xl font-bold text-sm hover:bg-black transition-all disabled:opacity-50 disabled:cursor-not-allowed group transition-all active:scale-95",children:[a?(0,r.jsx)(w.Z,{size:18,className:"animate-spin mr-2"}):(0,r.jsx)(N,{size:18,className:"mr-2 group-hover:-translate-y-0.5 transition-transform"}),"Index Knowledge"]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-orange-50/50 border-t border-orange-100 flex items-start space-x-3",children:[(0,r.jsx)(y.Z,{size:16,className:"text-orange-600 mt-0.5"}),(0,r.jsx)("p",{className:"text-[11px] text-orange-800 leading-relaxed font-medium",children:"Once indexed, the Project Copilot will be able to retrieve this information when answering questions. indexing typically takes less than a minute."})]})]})}var S=a(58910);function z(e){var t,a;return{id:e.id,name:e.name,location:e.location,status:e.status,progress:e.progress,description:e.description,team:null!==(t=e.team)&&void 0!==t?t:[],milestones:null!==(a=e.milestones)&&void 0!==a?a:[]}}function P(){let{id:e}=(0,p.useParams)(),[t,a]=(0,g.useState)(!1),[n,b]=(0,g.useState)("Updates"),[j,v]=(0,g.useState)(null),[w,N]=(0,g.useState)(!0),[P,T]=(0,g.useState)(!1),[A,M]=(0,g.useState)(!1),[E,Z]=(0,g.useState)({name:"",role:""}),[R,I]=(0,g.useState)({name:"",date:"",completed:!1}),[F,O]=(0,g.useState)(!1),L=(0,g.useCallback)(async()=>{if(e){if(Number.isNaN("string"==typeof e?parseInt(e,10):NaN)){let t=(0,S.R)(e);v(t?z(t):null);return}try{var t,a,r;let s="string"==typeof e?e:null!==(t=null==e?void 0:e[0])&&void 0!==t?t:"",n=await k.q.getById(s);if(n)v(z({...n,team:null!==(a=n.team)&&void 0!==a?a:[],milestones:null!==(r=n.milestones)&&void 0!==r?r:[]}));else{let t=(0,S.R)(e);v(t?z(t):null)}}catch(a){let t=(0,S.R)(e);v(t?z(t):null)}}},[e]);(0,g.useEffect)(()=>{let t=!1;if(N(!0),!e){let a=(0,S.R)(e);return v(a?z(a):null),N(!1),()=>{t=!0}}return(async()=>{await L(),t||N(!1)})(),()=>{t=!0}},[e,L]);let q=async t=>{if(t.preventDefault(),j&&e&&E.name.trim()){O(!0);try{var a;let t={name:E.name.trim(),role:E.role.trim()||"Member",initials:E.name.trim().split(/\s+/).map(e=>e[0]).slice(0,2).join("").toUpperCase()||"?"},r="string"==typeof e?e:null!==(a=null==e?void 0:e[0])&&void 0!==a?a:"";await k.q.update(r,{team:[...j.team,t]}),Z({name:"",role:""}),T(!1),await L()}finally{O(!1)}}},D=async t=>{if(t.preventDefault(),j&&e&&R.name.trim()){O(!0);try{var a;let t={name:R.name.trim(),date:R.date||"TBD",completed:R.completed},r="string"==typeof e?e:null!==(a=null==e?void 0:e[0])&&void 0!==a?a:"";await k.q.update(r,{milestones:[...j.milestones,t]}),I({name:"",date:"",completed:!1}),M(!1),await L()}finally{O(!1)}}};return w?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"h-8 w-48 bg-gray-100 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-64 bg-gray-100 rounded-2xl animate-pulse"})]}):j?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(h.default,{href:"/dashboard/projects",className:"p-2 hover:bg-white rounded-xl transition-colors text-gray-400 hover:text-gray-600 border border-transparent hover:border-gray-200",children:(0,r.jsx)(o,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:j.name}),(0,r.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wider ".concat("Active"===j.status?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:j.status})]}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:j.location})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors",children:(0,r.jsx)(i,{size:20})}),(0,r.jsx)("button",{className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors",children:(0,r.jsx)(l.Z,{size:20})}),(0,r.jsxs)("button",{className:"bg-orange-600 text-white px-5 py-2.5 rounded-xl font-semibold hover:bg-orange-700 transition-all shadow-lg shadow-orange-100 flex items-center",children:[(0,r.jsx)(c.Z,{size:20,className:"mr-2"}),"Add Update"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 text-wrap",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Overall Progress"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:[j.progress,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-3",children:(0,r.jsx)(s.E.div,{initial:{width:0},animate:{width:"".concat(j.progress,"%")},transition:{duration:1.5,ease:"easeOut"},className:"bg-orange-600 h-3 rounded-full shadow-sm"})}),(0,r.jsx)("p",{className:"mt-6 text-gray-600 leading-relaxed",children:j.description})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"flex border-b border-gray-100",children:["Updates","Drawings","RFIs","Finances","Knowledge"].map(e=>(0,r.jsxs)("button",{onClick:()=>b(e),className:"px-8 py-4 text-sm font-bold transition-all relative ".concat(n===e?"text-orange-600":"text-gray-400 hover:text-gray-600"),children:[e,n===e&&(0,r.jsx)(s.E.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-600"})]},e))}),(0,r.jsx)("div",{className:"p-8",children:"Knowledge"===n?(0,r.jsx)(C,{}):(0,r.jsxs)("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,r.jsx)(d,{className:"mx-auto text-gray-300 mb-4",size:48}),(0,r.jsxs)("h4",{className:"text-gray-900 font-bold",children:["No ",n.toLowerCase()," yet"]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Start by adding a ","Updates"===n?"site photo":"document","."]})]})})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Milestones"}),(0,r.jsx)("div",{className:"space-y-8",children:j.milestones.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start relative",children:[t<j.milestones.length-1&&(0,r.jsx)("div",{className:"absolute left-[11px] top-6 bottom-[-24px] w-0.5 bg-gray-100"}),(0,r.jsx)("div",{className:"mt-1 h-6 w-6 rounded-full flex items-center justify-center z-10 ".concat(e.completed?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.completed?(0,r.jsx)(m,{size:14}):(0,r.jsx)(u.Z,{size:14})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-bold ".concat(e.completed?"text-gray-900":"text-gray-500"),children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.date})]})]},"".concat(e.name,"-").concat(t)))}),A?(0,r.jsxs)("form",{onSubmit:D,className:"mt-6 p-4 bg-gray-50 rounded-xl space-y-3",children:[(0,r.jsx)("input",{type:"text",required:!0,placeholder:"Milestone name",value:R.name,onChange:e=>I(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"}),(0,r.jsx)("input",{type:"text",placeholder:"Date (e.g. Q1 2025)",value:R.date,onChange:e=>I(t=>({...t,date:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:R.completed,onChange:e=>I(t=>({...t,completed:e.target.checked})),className:"rounded"}),"Completed"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>M(!1),className:"flex-1 py-2 text-gray-600 text-sm font-medium rounded-lg bg-white border border-gray-200",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:F,className:"flex-1 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 disabled:opacity-50",children:F?"Adding…":"Add"})]})]}):(0,r.jsx)("button",{type:"button",onClick:()=>M(!0),className:"w-full mt-6 py-2 bg-gray-50 hover:bg-gray-100 text-gray-600 text-sm font-bold rounded-xl transition-colors",children:"+ Add milestone"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)(x.Z,{size:20,className:"mr-2 text-gray-400"}),"Project Team"]}),(0,r.jsx)("div",{className:"space-y-4",children:j.team.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 font-bold text-sm",children:e.initials}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 leading-none",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.role})]})]},"".concat(e.name,"-").concat(t)))}),P?(0,r.jsxs)("form",{onSubmit:q,className:"mt-6 p-4 bg-gray-50 rounded-xl space-y-3",children:[(0,r.jsx)("input",{type:"text",required:!0,placeholder:"Full name",value:E.name,onChange:e=>Z(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"}),(0,r.jsx)("input",{type:"text",placeholder:"Role",value:E.role,onChange:e=>Z(t=>({...t,role:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>T(!1),className:"flex-1 py-2 text-gray-600 text-sm font-medium rounded-lg bg-white border border-gray-200",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:F,className:"flex-1 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 disabled:opacity-50",children:F?"Adding…":"Add"})]})]}):(0,r.jsx)("button",{type:"button",onClick:()=>T(!0),className:"w-full mt-6 py-2 bg-gray-50 hover:bg-gray-100 text-gray-600 text-sm font-bold rounded-xl transition-colors",children:"+ Add team member"})]})]})]}),(0,r.jsx)("button",{onClick:()=>a(!0),className:"fixed bottom-8 right-8 p-4 bg-orange-600 text-white rounded-2xl shadow-2xl hover:bg-orange-700 transition-all hover:scale-110 active:scale-95 z-40 group",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y.Z,{size:24}),(0,r.jsxs)("div",{className:"absolute -top-12 right-0 bg-gray-900 text-white text-[10px] py-1 px-3 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:["Ask Project Copilot",(0,r.jsx)("div",{className:"absolute top-full right-4 border-4 border-transparent border-t-gray-900"})]})]})}),(0,r.jsx)(f.Z,{projectId:e,isOpen:t,onClose:()=>a(!1)})]}):(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(h.default,{href:"/dashboard/projects",className:"p-2 hover:bg-white rounded-xl transition-colors text-gray-400 hover:text-gray-600 border border-transparent hover:border-gray-200",children:(0,r.jsx)(o,{size:20})}),(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-6 py-4 rounded-2xl",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Project not found"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"The project you’re looking for doesn’t exist or was removed."})]})]})})}},38793:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var r=a(57437),s=a(2265),n=a(5095),o=a(60429),i=a(82023),l=a(32489),c=a(82222),d=a(92369),m=a(51817),u=a(44743),x=a(29116),h=a(94508);function p(e){let{projectId:t,isOpen:a,onClose:p}=e,[g,y]=(0,s.useState)([]),[f,b]=(0,s.useState)(""),[j,v]=(0,s.useState)(!1),w=(0,s.useRef)(null);(0,s.useEffect)(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[g,j]);let N=async()=>{if(!f.trim()||j)return;let e={role:"user",content:f};y(t=>[...t,e]),b(""),v(!0);try{let e=await x.n.ragChat(f),t={role:"assistant",content:e.content};y(e=>[...e,t])}catch(e){console.error("AI Chat error:",e),y(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{v(!1)}};return(0,r.jsx)(n.M,{children:a&&(0,r.jsxs)(o.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-6 right-6 w-[400px] h-[600px] bg-white rounded-3xl shadow-2xl border border-gray-100 flex flex-col z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-orange-600 text-white flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,r.jsx)(i.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-lg leading-none",children:"Project Copilot"}),(0,r.jsx)("p",{className:"text-white/70 text-xs mt-1",children:"Experimental AI Assistant"})]})]}),(0,r.jsx)("button",{onClick:p,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,r.jsx)(l.Z,{size:20})})]}),(0,r.jsxs)("div",{ref:w,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth",children:[0===g.length&&(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4 px-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-orange-50 rounded-2xl flex items-center justify-center text-orange-600",children:(0,r.jsx)(c.Z,{size:32})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-900",children:"How can I help today?"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Ask me anything about your project drawings, site updates, or safety protocols."})]})]}),g.map((e,t)=>(0,r.jsxs)(o.E.div,{initial:{opacity:0,x:"user"===e.role?10:-10},animate:{opacity:1,x:0},className:(0,h.cn)("flex items-start space-x-3","user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,r.jsx)("div",{className:(0,h.cn)("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold","user"===e.role?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"),children:"user"===e.role?(0,r.jsx)(d.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})}),(0,r.jsx)("div",{className:(0,h.cn)("p-4 rounded-2xl text-sm leading-relaxed max-w-[80%]","user"===e.role?"bg-blue-600 text-white rounded-tr-none":"bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100"),children:e.content})]},t)),j&&(0,r.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:(0,r.jsx)(c.Z,{size:16})}),(0,r.jsx)("div",{className:"p-4 rounded-2xl bg-gray-50 text-gray-800 rounded-tl-none border border-gray-100",children:(0,r.jsx)(m.Z,{size:20,className:"animate-spin text-orange-600"})})]})]}),(0,r.jsx)("div",{className:"p-6 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("input",{type:"text",value:f,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&N(),placeholder:"Ask your project assistant...",className:"w-full pl-5 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-2xl focus:border-orange-600 focus:bg-white transition-all outline-none text-sm group-hover:border-gray-300"}),(0,r.jsx)("button",{onClick:N,disabled:j||!f.trim(),className:"absolute right-2 top-2 p-2 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(u.Z,{size:18})})]})})]})})}},29116:function(e,t,a){"use strict";a.d(t,{n:function(){return n},q:function(){return o}});let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1";async function s(){try{var e;let{auth:t}=await Promise.all([a.e(358),a.e(990),a.e(933),a.e(257)]).then(a.bind(a,54257));if(!t)return{};let r=await (null===(e=t.currentUser)||void 0===e?void 0:e.getIdToken());return r?{Authorization:"Bearer ".concat(r)}:{}}catch(e){return{}}}let n={chat:async(e,t,a)=>{let s=await fetch("".concat(r,"/ai/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e,context:t,model:a})});if(!s.ok){var n;let e=await s.json();throw Error((null===(n=e.detail)||void 0===n?void 0:n.message)||e.detail||"Failed to chat")}return s.json()},ragChat:async(e,t,a)=>{let s=await fetch("".concat(r,"/ai/rag-chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,context:t,model:a})});if(!s.ok)throw Error((await s.json()).detail||"Failed to chat with AI");return s.json()},ingest:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",s=await fetch("".concat(r,"/ai/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,metadata:t,namespace:a})});if(!s.ok)throw Error((await s.json()).detail||"Failed to ingest document");return s.json()}},o={stats:async()=>{let e=await s(),t=await fetch("".concat(r,"/projects/stats"),{headers:{...e}});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to load stats");return t.json()},list:async()=>{var e;let t=await s(),a=await fetch("".concat(r,"/projects"),{headers:{"Content-Type":"application/json",...t}});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to list projects");return null!==(e=(await a.json()).projects)&&void 0!==e?e:[]},create:async e=>{let t=await s(),a=await fetch("".concat(r,"/projects"),{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to create project");return a.json()},getById:async e=>{let t=await s(),a=await fetch("".concat(r,"/projects/").concat(e),{headers:{...t}});if(404===a.status)return null;if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to load project");return a.json()},update:async(e,t)=>{let a=await s(),n=await fetch("".concat(r,"/projects/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(t)});if(!n.ok)throw Error((await n.json().catch(()=>({}))).detail||"Failed to update project");return n.json()}}},58910:function(e,t,a){"use strict";a.d(t,{R:function(){return s},w:function(){return r}});let r=[{id:1,name:"Mumbai Metro Extension",location:"Mumbai, MH",status:"Active",progress:35,teamCount:18,deadline:"Dec 2026",image:"https://images.unsplash.com/photo-1541888946425-d81bb19480c5?auto=format&fit=crop&q=80&w=400",description:"Phase 2 extension of the Mumbai Metro Line 3, covering 12km of elevated corridor and 8 stations.",team:[{name:"John Doe",role:"Project Manager",initials:"JD"},{name:"Sarah Smith",role:"Lead Architect",initials:"SS"},{name:"Raj Vyas",role:"Site Engineer",initials:"RV"}],milestones:[{name:"Foundation Work",date:"Oct 2024",completed:!0},{name:"Pillar Casting",date:"Jan 2025",completed:!0},{name:"Girder Launching",date:"June 2025",completed:!1},{name:"Station Finishing",date:"March 2026",completed:!1}]},{id:2,name:"DLF Cyber City - Tower C",location:"Gurgaon, HR",status:"Active",progress:68,teamCount:42,deadline:"Aug 2025",image:"https://images.unsplash.com/photo-1503387762-592dee58c190?auto=format&fit=crop&q=80&w=400",description:"Commercial tower C as part of DLF Cyber City complex. 28 floors with basement parking and retail podium.",team:[{name:"Amit Sharma",role:"Project Manager",initials:"AS"},{name:"Priya Nair",role:"Structural Engineer",initials:"PN"},{name:"Vikram Singh",role:"MEP Lead",initials:"VS"}],milestones:[{name:"Excavation & Piling",date:"Jun 2024",completed:!0},{name:"Core & Shell",date:"Dec 2024",completed:!0},{name:"Fa\xe7ade & MEP",date:"Apr 2025",completed:!1},{name:"Handover",date:"Aug 2025",completed:!1}]},{id:3,name:"Green Valley Residential",location:"Bangalore, KA",status:"Planning",progress:10,teamCount:5,deadline:"Mar 2027",image:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&q=80&w=400",description:"Residential complex with 4 towers, clubhouse, and landscaped amenities. Pre-sales and approvals in progress.",team:[{name:"Kavitha Reddy",role:"Project Lead",initials:"KR"},{name:"Suresh Kumar",role:"Design Coordinator",initials:"SK"}],milestones:[{name:"RERA & Approvals",date:"Q1 2025",completed:!1},{name:"Groundbreaking",date:"Q3 2025",completed:!1},{name:"Tower 1 Foundation",date:"Q1 2026",completed:!1},{name:"Phase 1 Handover",date:"Mar 2027",completed:!1}]}];function s(e){var t,a;if(null==e)return null;let s="string"==typeof e?parseInt(e,10):parseInt(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:"",10);return Number.isNaN(s)?null:null!==(a=r.find(e=>e.id===s))&&void 0!==a?a:null}},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98728:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},99376:function(e,t,a){"use strict";var r=a(35475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},40257:function(e,t,a){"use strict";var r,s;e.exports=(null==(r=a.g.process)?void 0:r.env)&&"object"==typeof(null==(s=a.g.process)?void 0:s.env)?a.g.process:a(44227)},44227:function(e){!function(){var t={229:function(e){var t,a,r,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var l=[],c=!1,d=-1;function m(){c&&r&&(c=!1,r.length?l=r.concat(l):d=-1,l.length&&u())}function u(){if(!c){var e=i(m);c=!0;for(var t=l.length;t;){for(r=l,l=[];++d<t;)r&&r[d].run();d=-1,t=l.length}r=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function h(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new x(e,t)),1!==l.length||c||i(u)},x.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},a={};function r(e){var s=a[e];if(void 0!==s)return s.exports;var n=a[e]={exports:{}},o=!0;try{t[e](n,n.exports,r),o=!1}finally{o&&delete a[e]}return n.exports}r.ab="//";var s=r(229);e.exports=s}()}},function(e){e.O(0,[972,429,302,425,971,117,744],function(){return e(e.s=11144)}),_N_E=e.O()}]);