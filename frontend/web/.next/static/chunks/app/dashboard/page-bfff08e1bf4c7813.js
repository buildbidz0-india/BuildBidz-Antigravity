(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2410:function(e,t,a){Promise.resolve().then(a.bind(a,51170))},51170:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eu}});var s=a(57437),r=a(2265),n=a(60429),i=a(99397),l=a(82023),o=a(64972),d=a(47625),c=a(77031),m=a(56940),x=a(97059),u=a(62994),p=a(8147),f=a(22190),h=a(83046);let b=[{name:"Larsen & Toubro",price:98,score:92,delivery:95},{name:"Tata Projects",price:95,score:88,delivery:90},{name:"NCC Ltd",price:85,score:78,delivery:75},{name:"Shapoorji",price:92,score:85,delivery:88}];function g(e){var t,a;let{decision:r,loading:n}=e,i=(null!==(a=null==r?void 0:null===(t=r.rankings)||void 0===t?void 0:t.map(e=>{var t,a,s,r,n;return{name:null!==(a=e.supplier)&&void 0!==a?a:"",score:Number(null!==(r=null!==(s=e.total_score)&&void 0!==s?s:e.score)&&void 0!==r?r:0),price:null!==(n=null===(t=e.breakdown)||void 0===t?void 0:t.price)&&void 0!==n?n:void 0}}))&&void 0!==a?a:b).map(e=>{var t;return{...e,price:null!==(t=e.price)&&void 0!==t?t:e.score}});return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm h-full flex flex-col p-6",children:[(0,s.jsxs)("div",{className:"mb-6 space-y-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Bid Analysis"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"AI-driven evaluation based on Price, Delivery & Reputation"})]}),(0,s.jsx)("div",{className:"flex-1 min-h-[300px] w-full",children:n?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsx)(d.h,{width:"100%",height:"100%",children:(0,s.jsxs)(c.v,{data:i,margin:{top:10,right:10,left:-20,bottom:0},barGap:2,children:[(0,s.jsx)(m.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,s.jsx)(x.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},dy:10}),(0,s.jsx)(u.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11}}),(0,s.jsx)(p.u,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,s.jsx)(f.D,{wrapperStyle:{paddingTop:"20px"}}),(0,s.jsx)(h.$,{dataKey:"score",name:"AI Score",fill:"#0f172a",radius:[4,4,0,0],barSize:24}),(0,s.jsx)(h.$,{dataKey:"price",name:"Price Competitiveness",fill:"#cbd5e1",radius:[4,4,0,0],barSize:24})]})})}),(null==r?void 0:r.justification)&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-orange-50/50 border border-orange-100 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-orange-500"}),(0,s.jsx)("p",{className:"text-xs font-bold text-orange-700 uppercase tracking-wider",children:"AI Insight"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-medium",children:r.justification})]})]})}var j=a(5481),y=a(23263),v=a(54061),N=a(29116);let w=[{value:"steel",label:"Steel (TMT)"},{value:"cement",label:"Cement"},{value:"sand",label:"Sand"},{value:"tiles",label:"Tiles"},{value:"fittings",label:"Fittings"}],k=[{value:"delhi_ncr",label:"Delhi NCR"},{value:"patna",label:"Patna"},{value:"lucknow",label:"Lucknow"},{value:"indore",label:"Indore"}];function C(){var e,t;let[a,n]=(0,r.useState)("steel"),[i,l]=(0,r.useState)("delhi_ncr"),[o,c]=(0,r.useState)(null),[h,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{b(!0),N.Ai.analyze({material:a,region:i,quantity:10}).then(c).catch(()=>c(null)).finally(()=>b(!1))},[a,i]);let g=null!==(t=null==o?void 0:null===(e=o.historical_data)||void 0===e?void 0:e.map(e=>({month:new Date(e.date).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),actual:e.price,forecast:null})))&&void 0!==t?t:[],C=g.length&&o?[...g,{month:"30d f/c",actual:null,forecast:o.forecast_price_30d}]:g;if(h)return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm h-full",children:[(0,s.jsx)("div",{className:"mb-6 flex justify-between items-start",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Price Forecast"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Trend analysis & AI lock recommendation"})]})}),(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600"})})]});let _=(null==o?void 0:o.lock_rate_recommendation)?(0,s.jsx)("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-md border border-amber-200",children:"LOCK NOW"}):(0,s.jsx)("span",{className:"bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded-md border border-emerald-200",children:"WAIT"});return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm h-full flex flex-col p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 tracking-tight",children:"Price Forecast"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Market Trend Analysis"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("select",{value:a,onChange:e=>n(e.target.value),className:"text-sm h-9 border border-input rounded-md px-3 bg-background hover:bg-accent/5 focus:ring-2 focus:ring-ring focus:border-input transition-colors cursor-pointer",children:w.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsx)("select",{value:i,onChange:e=>l(e.target.value),className:"text-sm h-9 border border-input rounded-md px-3 bg-background hover:bg-accent/5 focus:ring-2 focus:ring-ring focus:border-input transition-colors cursor-pointer",children:k.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),o&&_]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-[300px] w-full",children:h?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsx)(d.h,{width:"100%",height:"100%",children:(0,s.jsxs)(j.T,{data:C,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorForecast",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.15}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:0})]})}),(0,s.jsx)(m.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,s.jsx)(x.K,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},dy:10}),(0,s.jsx)(u.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:11},domain:["dataMin - 500","dataMax + 500"]}),(0,s.jsx)(p.u,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,s.jsx)(f.D,{wrapperStyle:{paddingTop:"20px"}}),(0,s.jsx)(y.u,{type:"monotone",dataKey:"actual",name:"Current Price",stroke:"#0f172a",strokeWidth:2,fill:"transparent"}),(null==o?void 0:o.forecast_price_30d)!=null&&(0,s.jsx)(v.x,{type:"monotone",dataKey:"forecast",name:"AI Forecast",stroke:"#f97316",strokeWidth:2,strokeDasharray:"4 4",dot:{r:4,fill:"#f97316",strokeWidth:0},connectNulls:!0})]})})}),(null==o?void 0:o.ai_analysis)&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-100 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:"AI Analysis"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed font-medium",children:o.ai_analysis})]})]})}var _=a(27648),S=a(97685),z=a(5005),A=a(91723),Z=a(49322),P=a(17580),R=a(69430),L=a(10407),T=a(31047),D=a(67782),E=a(94508);let F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,E.cn)("rounded-xl border bg-card text-card-foreground shadow focus-visible:outline-none",a),...r})});F.displayName="Card";let I=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,E.cn)("flex flex-col space-y-1.5 p-6",a),...r})});I.displayName="CardHeader";let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,E.cn)("font-semibold leading-none tracking-tight",a),...r})});M.displayName="CardTitle";let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,E.cn)("text-sm text-muted-foreground",a),...r})});U.displayName="CardDescription";let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,E.cn)("p-6 pt-0",a),...r})});O.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,E.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var K=a(37053),q=a(90535);let V=(0,q.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-accent text-white hover:bg-accent/90 shadow-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:i=!1,...l}=e,o=i?K.g7:"button";return(0,s.jsx)(o,{className:(0,E.cn)(V({variant:r,size:n,className:a})),ref:t,...l})});W.displayName="Button";let B=(0,q.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500 text-white shadow hover:bg-emerald-600",warning:"border-transparent bg-amber-500 text-white shadow hover:bg-amber-600"}},defaultVariants:{variant:"default"}});function H(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,E.cn)(B({variant:a}),t),...r})}var G=a(27096),Y=a(30401),$=a(40519);let Q=G.fC,J=G.xz;G.ZA,G.Uv,G.Tr,G.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...i}=e;return(0,s.jsxs)(G.fF,{ref:t,className:(0,E.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...i,children:[n,(0,s.jsx)(L.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=G.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(G.tu,{ref:t,className:(0,E.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=G.tu.displayName;let X=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(G.Uv,{children:(0,s.jsx)(G.VY,{ref:t,sideOffset:r,className:(0,E.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});X.displayName=G.VY.displayName;let ee=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(G.ck,{ref:t,className:(0,E.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});ee.displayName=G.ck.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...i}=e;return(0,s.jsxs)(G.oC,{ref:t,className:(0,E.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(G.wU,{children:(0,s.jsx)(Y.Z,{className:"h-4 w-4"})})}),r]})}).displayName=G.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(G.Rk,{ref:t,className:(0,E.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(G.wU,{children:(0,s.jsx)($.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=G.Rk.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(G.__,{ref:t,className:(0,E.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=G.__.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(G.Z0,{ref:t,className:(0,E.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=G.Z0.displayName;let et=[{label:"Active Projects",key:"active",icon:S.Z,trend:"+12.5%",trendUp:!0,desc:"vs. last month"},{label:"Total Projects",key:"total",icon:z.Z,trend:"+4.2%",trendUp:!0,desc:"vs. last month"},{label:"In Planning",key:"planning",icon:A.Z,trend:"-2.1%",trendUp:!1,desc:"vs. last month"},{label:"Critical Alerts",value:"2",icon:Z.Z,trend:"+1",trendUp:!1,desc:"new since yesterday",alert:!0}];function ea(e){let{stats:t,loading:a}=e,r=e=>{var a;return"value"in e?e.value:t&&e.key?String(null!==(a=t[e.key])&&void 0!==a?a:"0"):"—"};return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:et.map((e,t)=>(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,s.jsx)(F,{className:"hover:shadow-md transition-shadow",children:(0,s.jsxs)(O,{className:"p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between space-x-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:(0,E.cn)("p-2 rounded-full",e.alert?"bg-red-100 text-red-600":"bg-primary/10 text-primary"),children:(0,s.jsx)(e.icon,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e.label}),(0,s.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:a?(0,s.jsx)("span",{className:"animate-pulse bg-gray-200 h-8 w-12 block rounded"}):r(e)})]})]})}),(0,s.jsxs)("div",{className:"mt-4 flex items-center text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{className:(0,E.cn)("flex items-center font-medium mr-2",e.trendUp?"text-green-600":"text-red-600"),children:[e.trendUp?(0,s.jsx)(P.Z,{size:14,className:"mr-1"}):(0,s.jsx)(R.Z,{size:14,className:"mr-1"}),e.trend]}),e.desc]})]})})},e.label))})}function es(e){let{projects:t,loading:a}=e;return(0,s.jsxs)(F,{className:"h-full",children:[(0,s.jsxs)(I,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(M,{children:"Recent Projects"}),(0,s.jsx)(U,{children:"Latest updates from your project portfolio"})]}),(0,s.jsx)(W,{variant:"ghost",size:"sm",className:"hidden sm:flex",asChild:!0,children:(0,s.jsxs)(_.default,{href:"/dashboard/projects",children:["View all ",(0,s.jsx)(L.Z,{className:"ml-2 h-4 w-4"})]})})]}),(0,s.jsx)(O,{className:"p-0",children:(0,s.jsx)("div",{className:"space-y-0",children:a?[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b last:border-0 border-border/50",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 w-48 bg-muted animate-pulse rounded"}),(0,s.jsx)("div",{className:"h-3 w-24 bg-muted animate-pulse rounded"})]}),(0,s.jsx)("div",{className:"h-8 w-20 bg-muted animate-pulse rounded"})]},t)):0===t.length?(0,s.jsx)("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"No recent activity found."}):t.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b last:border-0 border-border/50 hover:bg-muted/30 transition-colors group",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm shrink-0",children:e.name.substring(0,2).toUpperCase()}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(T.Z,{className:"mr-1 h-3 w-3"}),"Created ",new Date(null!==(t=e.created_at)&&void 0!==t?t:"").toLocaleDateString("en-IN",{month:"short",day:"numeric"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(H,{variant:function(e){switch(e.toLowerCase()){case"active":return"success";case"planning":return"warning";case"completed":return"default";default:return"secondary"}}(e.status),children:e.status}),(0,s.jsxs)(Q,{children:[(0,s.jsx)(J,{asChild:!0,children:(0,s.jsx)(W,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(D.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(X,{align:"end",children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsx)(_.default,{href:"/dashboard/projects/".concat(e.id),children:"View Details"})}),(0,s.jsx)(ee,{children:"View Bids"})]})]})]})]},e.id)})})})]})}var er=a(38793),en=a(53869),ei=a(5095),el=a(32489),eo=a(44743),ed=a(78867),ec=a(69064);function em(e){var t,a,i,l,o;let{isOpen:d,onClose:c,defaultProjectName:m=""}=e,[x,u]=(0,r.useState)({contractor_name:"",phone_number:"",language:"hinglish",step:"award_notification",project_name:m,details:{message:"Aapka bid accept ho gaya hai. Site par milte hain."}}),[p,f]=(0,r.useState)(null),[h,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),y=async e=>{var t,a,s;if(e.preventDefault(),!(null===(t=x.contractor_name)||void 0===t?void 0:t.trim())||!(null===(a=x.phone_number)||void 0===a?void 0:a.trim())||!(null===(s=x.project_name)||void 0===s?void 0:s.trim())){ec.Am.error("Fill contractor name, phone, and project name.");return}b(!0),f(null);try{let e=await N.jb.send(x);f(e),ec.Am.success("Message generated.")}catch(e){ec.Am.error(e instanceof Error?e.message:"Failed to generate notification.")}finally{b(!1)}};return(0,s.jsx)(ei.M,{children:d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,className:"fixed inset-0 bg-black/50 z-40"}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white rounded-2xl shadow-xl z-50 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Send notification"}),(0,s.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)(el.Z,{size:20})})]}),(0,s.jsxs)("form",{onSubmit:y,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor name"}),(0,s.jsx)("input",{type:"text",value:null!==(t=x.contractor_name)&&void 0!==t?t:"",onChange:e=>u(t=>({...t,contractor_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone number"}),(0,s.jsx)("input",{type:"text",value:null!==(a=x.phone_number)&&void 0!==a?a:"",onChange:e=>u(t=>({...t,phone_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",placeholder:"+91..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project name"}),(0,s.jsx)("input",{type:"text",value:null!==(i=x.project_name)&&void 0!==i?i:"",onChange:e=>u(t=>({...t,project_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,s.jsxs)("select",{value:null!==(l=x.language)&&void 0!==l?l:"hinglish",onChange:e=>u(t=>({...t,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",children:[(0,s.jsx)("option",{value:"english",children:"English"}),(0,s.jsx)("option",{value:"hindi",children:"Hindi"}),(0,s.jsx)("option",{value:"hinglish",children:"Hinglish"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notification type"}),(0,s.jsxs)("select",{value:null!==(o=x.step)&&void 0!==o?o:"award_notification",onChange:e=>u(t=>({...t,step:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-xl text-sm",children:[(0,s.jsx)("option",{value:"award_notification",children:"Award notification"}),(0,s.jsx)("option",{value:"site_ready",children:"Site ready"}),(0,s.jsx)("option",{value:"payment_released",children:"Payment released"}),(0,s.jsx)("option",{value:"defect_notice",children:"Defect notice"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 py-3 bg-orange-600 text-white rounded-xl font-semibold hover:bg-orange-700 disabled:opacity-50",children:h?"Generating...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo.Z,{size:18})," Generate message"]})})]}),p&&(0,s.jsxs)("div",{className:"p-6 border-t border-gray-100 bg-gray-50",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"WhatsApp message"}),(0,s.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-xl text-sm text-gray-800 whitespace-pre-wrap",children:p.whatsapp_formatted}),(0,s.jsxs)("button",{type:"button",onClick:()=>{(null==p?void 0:p.whatsapp_formatted)&&(navigator.clipboard.writeText(p.whatsapp_formatted),j(!0),ec.Am.success("Copied to clipboard."),setTimeout(()=>j(!1),2e3))},className:"mt-3 flex items-center gap-2 text-orange-600 hover:text-orange-700 text-sm font-medium",children:[g?(0,s.jsx)(Y.Z,{size:16}):(0,s.jsx)(ed.Z,{size:16}),g?"Copied":"Copy to clipboard"]})]})]})]})})}let ex=[{id:"b1",supplier_name:"Larsen & Toubro",price:148e4,delivery_days:21,reputation_score:9.2},{id:"b2",supplier_name:"Tata Projects",price:152e4,delivery_days:18,reputation_score:8.8},{id:"b3",supplier_name:"NCC Ltd",price:142e4,delivery_days:28,reputation_score:7.5},{id:"b4",supplier_name:"Shapoorji",price:155e4,delivery_days:20,reputation_score:8.5}];function eu(){let[e,t]=(0,r.useState)(!1),[a,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[x,u]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[h,b]=(0,r.useState)(!0),[j,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!0),[k,_]=(0,r.useState)(!1),S=()=>{f(!0),b(!0),N.qx.stats().then(m).catch(()=>m(null)).finally(()=>f(!1)),N.qx.list().then(e=>u(e.slice(0,5))).catch(()=>u([])).finally(()=>b(!1))};return(0,r.useEffect)(()=>{S()},[a]),(0,r.useEffect)(()=>{w(!0),N.QU.compare("TMT Steel supply for Phase 1",ex).then(y).catch(()=>y(null)).finally(()=>w(!1))},[]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold font-heading text-foreground tracking-tight",children:"Dashboard Overview"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Welcome back. Here's your construction portfolio status today."})]}),(0,s.jsxs)(W,{onClick:()=>d(!0),size:"lg",className:"shadow-lg shadow-primary/20",children:[(0,s.jsx)(i.Z,{className:"mr-2 h-5 w-5"}),"New Project"]})]}),(0,s.jsx)(ea,{stats:c,loading:p}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"h-[500px]",children:(0,s.jsx)(g,{decision:j,loading:v})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"h-[500px]",children:(0,s.jsx)(C,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(es,{projects:x,loading:h})}),(0,s.jsxs)(F,{className:"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground border-none shadow-xl overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),(0,s.jsxs)(I,{className:"relative z-10 pb-2",children:[(0,s.jsx)("div",{className:"h-12 w-12 bg-white/10 rounded-xl flex items-center justify-center mb-4 backdrop-blur-sm",children:(0,s.jsx)(l.Z,{className:"h-6 w-6 text-accent"})}),(0,s.jsx)(M,{className:"text-xl",children:"AI Copilot"}),(0,s.jsx)(U,{className:"text-primary-foreground/70",children:"Your intelligent assistant for construction management."})]}),(0,s.jsxs)(O,{className:"relative z-10 space-y-4 mt-4",children:[(0,s.jsxs)(W,{variant:"secondary",className:"w-full justify-start h-auto py-3 px-4 bg-white/10 hover:bg-white/20 text-white border-0",onClick:()=>t(!0),children:[(0,s.jsx)(o.Z,{className:"mr-3 h-5 w-5 text-accent"}),(0,s.jsxs)("div",{className:"flex flex-col items-start text-left",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Ask Copilot"}),(0,s.jsx)("span",{className:"text-xs opacity-70 font-normal",children:"Analyze bids or get recommendations"})]})]}),(0,s.jsxs)(W,{variant:"secondary",className:"w-full justify-start h-auto py-3 px-4 bg-white/10 hover:bg-white/20 text-white border-0",onClick:()=>_(!0),children:[(0,s.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-accent mr-3"}),(0,s.jsxs)("div",{className:"flex flex-col items-start text-left",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Send Notifications"}),(0,s.jsx)("span",{className:"text-xs opacity-70 font-normal",children:"Draft emails to contractors"})]})]})]})]})]}),(0,s.jsx)(er.Z,{projectId:"dashboard",isOpen:e,onClose:()=>t(!1)}),(0,s.jsx)(en.Z,{isOpen:a,onClose:()=>d(!1)}),(0,s.jsx)(em,{isOpen:k,onClose:()=>_(!1)})]})}},53869:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(57437),r=a(2265),n=a(5095),i=a(60429),l=a(97685),o=a(32489),d=a(69064),c=a(29116);function m(e){let{isOpen:t,onClose:a,onSuccess:m}=e,[x,u]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[h,b]=(0,r.useState)(""),[g,j]=(0,r.useState)(!1),y=async e=>{if(e.preventDefault(),x.trim()){j(!0);try{await c.qx.create({name:x.trim(),location:p.trim()||void 0,description:h.trim()||void 0}),d.Am.success("Project created."),u(""),f(""),b(""),a(),null==m||m()}catch(e){d.Am.error(e instanceof Error?e.message:"Something went wrong.")}finally{j(!1)}}},v=()=>{g||a()};return(0,s.jsx)(n.M,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v,className:"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm"}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-2xl shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center text-orange-600",children:(0,s.jsx)(l.Z,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900",children:"New Project"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Add a new construction project"})]})]}),(0,s.jsx)("button",{type:"button",onClick:v,disabled:g,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:(0,s.jsx)(o.Z,{size:20})})]}),(0,s.jsxs)("form",{onSubmit:y,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"project-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project name *"}),(0,s.jsx)("input",{id:"project-name",type:"text",required:!0,value:x,onChange:e=>u(e.target.value),placeholder:"e.g. Mumbai Metro Extension",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"project-location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)("input",{id:"project-location",type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"e.g. Mumbai, MH",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"project-desc",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"project-desc",rows:3,value:h,onChange:e=>b(e.target.value),placeholder:"Brief description of the project...",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm resize-none"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)("button",{type:"button",onClick:v,disabled:g,className:"flex-1 py-2.5 px-4 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:g||!x.trim(),className:"flex-1 py-2.5 px-4 bg-orange-600 text-white rounded-xl font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating…":"Create Project"})]})]})]})]})})}}},function(e){e.O(0,[429,972,659,302,810,35,793,971,117,744],function(){return e(e.s=2410)}),_N_E=e.O()}]);