(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{31085:function(t,e,a){Promise.resolve().then(a.bind(a,55798))},55798:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return h}});var r=a(57437),n=a(2265),i=a(60429),o=a(48662);let c=(0,a(79205).Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var s=a(17689),l=a(51817),d=a(29116),u=a(69064);function h(){let[t,e]=(0,n.useState)(!1),[a,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),y=(0,n.useRef)(null),w=(0,n.useRef)([]),m=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",r=new MediaRecorder(t);y.current=r,w.current=[],r.ondataavailable=t=>{t.data.size&&w.current.push(t.data)},r.onstop=async()=>{if(t.getTracks().forEach(t=>t.stop()),0===w.current.length)return;let e=new Blob(w.current,{type:a}),r=new File([e],"audio.webm",{type:a});f(!0),h("");try{let t=await d.aH.transcribe(r);h(t.text||"(No speech detected)"),u.Am.success("Transcription complete.")}catch(t){u.Am.error(t instanceof Error?t.message:"Transcription failed.")}finally{f(!1)}},r.start(),e(!0)}catch(t){u.Am.error("Microphone access denied or unavailable.")}},j=async t=>{var e;let a=null===(e=t.target.files)||void 0===e?void 0:e[0];if(a){f(!0),h("");try{let t=await d.aH.transcribe(a);h(t.text||"(No speech detected)"),u.Am.success("Transcription complete.")}catch(t){u.Am.error(t instanceof Error?t.message:"Transcription failed.")}finally{f(!1)}t.target.value=""}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Field Voice"}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:"Record or upload audio for transcription (RFI, OAC, site notes)."})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[t?(0,r.jsxs)("button",{type:"button",onClick:()=>{y.current&&t&&(y.current.stop(),y.current=null,e(!1))},className:"flex items-center justify-center gap-2 bg-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-700",children:[(0,r.jsx)(c,{size:20})," Stop"]}):(0,r.jsxs)("button",{type:"button",onClick:m,disabled:p,className:"flex items-center justify-center gap-2 bg-orange-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-orange-700 disabled:opacity-50",children:[(0,r.jsx)(o.Z,{size:20})," Record"]}),(0,r.jsxs)("label",{className:"flex items-center justify-center gap-2 px-6 py-3 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:[(0,r.jsx)(s.Z,{size:20}),"Upload audio",(0,r.jsx)("input",{type:"file",accept:"audio/*",className:"hidden",onChange:j,disabled:p})]})]}),p&&(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-2 text-gray-500",children:[(0,r.jsx)(l.Z,{size:20,className:"animate-spin"}),"Transcribing..."]}),a&&!p&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-100 rounded-xl",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Transcript"}),(0,r.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:a})]})]})]})}},29116:function(t,e,a){"use strict";a.d(e,{Ai:function(){return s},QU:function(){return c},aH:function(){return u},jb:function(){return l},no:function(){return i},qx:function(){return o},s2:function(){return d}});let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1";async function n(){try{var t;let{auth:e}=await Promise.all([a.e(358),a.e(990),a.e(933),a.e(257)]).then(a.bind(a,54257));if(!e)return{};let r=await (null===(t=e.currentUser)||void 0===t?void 0:t.getIdToken());return r?{Authorization:"Bearer ".concat(r)}:{}}catch(t){return{}}}let i={chat:async(t,e,a)=>{let n=await fetch("".concat(r,"/ai/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t,context:e,model:a})});if(!n.ok){var i;let t=await n.json();throw Error((null===(i=t.detail)||void 0===i?void 0:i.message)||t.detail||"Failed to chat")}return n.json()},ragChat:async(t,e,a)=>{let n=await fetch("".concat(r,"/ai/rag-chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,context:e,model:a})});if(!n.ok)throw Error((await n.json()).detail||"Failed to chat with AI");return n.json()},ingest:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n=await fetch("".concat(r,"/ai/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,metadata:e,namespace:a})});if(!n.ok)throw Error((await n.json()).detail||"Failed to ingest document");return n.json()}},o={stats:async()=>{let t=await n(),e=await fetch("".concat(r,"/projects/stats"),{headers:{...t}});if(!e.ok)throw Error((await e.json().catch(()=>({}))).detail||"Failed to load stats");return e.json()},list:async()=>{var t;let e=await n(),a=await fetch("".concat(r,"/projects"),{headers:{"Content-Type":"application/json",...e}});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to list projects");return null!==(t=(await a.json()).projects)&&void 0!==t?t:[]},create:async t=>{let e=await n(),a=await fetch("".concat(r,"/projects"),{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to create project");return a.json()},getById:async t=>{let e=await n(),a=await fetch("".concat(r,"/projects/").concat(t),{headers:{...e}});if(404===a.status)return null;if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Failed to load project");return a.json()},update:async(t,e)=>{let a=await n(),i=await fetch("".concat(r,"/projects/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(e)});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Failed to update project");return i.json()}},c={compare:async(t,e,a)=>{let i=await n(),o=await fetch("".concat(r,"/awards/compare"),{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:t,bids:e,criteria:null!=a?a:{}})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"Award comparison failed");return o.json()},scoreOnly:async(t,e,a)=>{let i=await n(),o=await fetch("".concat(r,"/awards/score-only"),{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify({requirement_description:t,bids:e,criteria:null!=a?a:{}})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).detail||"Scoring failed");return o.json()}},s={analyze:async t=>{let e=await n(),a=await fetch("".concat(r,"/forecast/analyze"),{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Forecast failed");return a.json()}},l={send:async t=>{let e=await n(),a=await fetch("".concat(r,"/coordination/send"),{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Coordination failed");return a.json()}},d={extract:async t=>{let e=await n(),a=await fetch("".concat(r,"/extract/"),{method:"POST",headers:{"Content-Type":"application/json",...e},body:JSON.stringify({ocr_text:t})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||"Extraction failed");return a.json()}},u={transcribe:async t=>{let e=await n(),a=new FormData;a.append("file",t);let i=await fetch("".concat(r,"/transcribe/"),{method:"POST",headers:{...e},body:a});if(!i.ok)throw Error((await i.json().catch(()=>({}))).detail||"Transcription failed");return i.json()}}},79205:function(t,e,a){"use strict";a.d(e,{Z:function(){return u}});var r=a(2265);let n=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,a)=>a?a.toUpperCase():e.toLowerCase()),o=t=>{let e=i(t);return e.charAt(0).toUpperCase()+e.slice(1)},c=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.filter((t,e,a)=>!!t&&""!==t.trim()&&a.indexOf(t)===e).join(" ").trim()},s=t=>{for(let e in t)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((t,e)=>{let{color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:u,iconNode:h,...p}=t;return(0,r.createElement)("svg",{ref:e,...l,width:n,height:n,stroke:a,strokeWidth:o?24*Number(i)/Number(n):i,className:c("lucide",d),...!u&&!s(p)&&{"aria-hidden":"true"},...p},[...h.map(t=>{let[e,a]=t;return(0,r.createElement)(e,a)}),...Array.isArray(u)?u:[u]])}),u=(t,e)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:s,...l}=a;return(0,r.createElement)(d,{ref:i,iconNode:e,className:c("lucide-".concat(n(o(t))),"lucide-".concat(t),s),...l})});return a.displayName=o(t),a}},51817:function(t,e,a){"use strict";a.d(e,{Z:function(){return r}});let r=(0,a(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},48662:function(t,e,a){"use strict";a.d(e,{Z:function(){return r}});let r=(0,a(79205).Z)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},17689:function(t,e,a){"use strict";a.d(e,{Z:function(){return r}});let r=(0,a(79205).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},function(t){t.O(0,[429,659,971,117,744],function(){return t(t.s=31085)}),_N_E=t.O()}]);